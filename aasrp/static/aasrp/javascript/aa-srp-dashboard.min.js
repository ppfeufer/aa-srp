$(document).ready(()=>{"use strict";const a=$("#table_tab-srp-links"),t=$("#table_tab-user-srp-requests");let s=0,r=(a.DataTable({ajax:{url:aaSrpSettings.url.availableSrpLinks,dataSrc:"",cache:!1},columns:[{data:"srp_name",className:"srp-link-fleet-name"},{data:"creator",className:"srp-link-creator"},{data:"fleet_time",render:a=>moment(a).utc().format(aaSrpSettings.datetimeFormat),className:"srp-link-fleet-time"},{data:"fleet_type",className:"srp-link-fleet-type"},{data:"fleet_doctrine",className:"srp-link-fleet-doctrine"},{data:"aar_link",className:"srp-link-aar-link"},{data:"srp_code",render:{display:"display",_:"sort"},className:"srp-link-code"},{data:"srp_costs",render:(a,t)=>"display"===t?`${a.toLocaleString()} ISK`:a,className:"srp-link-total-cost text-end"},{data:"srp_status",className:"srp-link-status"},{data:"pending_requests",className:"srp-link-pending-requests text-end"},{data:"actions",className:"srp-link-actions text-end"}],columnDefs:[{orderable:!1,targets:[10]},{width:115,targets:[10]}],order:[[2,"asc"]],paging:aaSrpSettings.dataTable.paging,createdRow:(a,t,e)=>{$(a).attr("data-row-id",e).attr("data-srp-code",t.srp_code.sort),s+=parseInt(t.srp_costs),$(".srp-dashboard-total-isk-cost-amount").html(`${s.toLocaleString()} ISK`)}}),0);t.DataTable({ajax:{url:aaSrpSettings.url.userSrpRequests,dataSrc:"",cache:!1},columns:[{data:"request_time",render:a=>moment(a).utc().format(aaSrpSettings.datetimeFormat),className:"srp-request-time"},{data:"character_html",render:{display:"display",_:"sort"},className:"srp-request-character"},{data:"fleet_name",render:(a,t,e)=>`
                        <p>${e.fleet_name}</p>
                        <p class="small text-muted">
                            ${aaSrpSettings.translation.dataTable.content.srpCode}: ${e.srp_code}
                            <br>${aaSrpSettings.translation.dataTable.content.requestCode}: ${e.request_code}
                        </p>
                    `,className:"srp-request-fleet-details"},{data:"ship_html",render:{display:"display",_:"sort"},className:"srp-request-ship"},{data:"zbk_loss_amount",render:(a,t)=>"display"===t?`${a.toLocaleString()} ISK`:a,className:"srp-request-zkb-loss-amount text-end"},{data:"payout_amount",render:(a,t)=>"display"===t?`${a.toLocaleString()} ISK`:a,className:"srp-request-payout text-end"},{data:"request_status_icon",className:"srp-request-status text-end"},{data:"request_status"},{data:"ship"},{data:"character"}],columnDefs:[{orderable:!1,targets:[6]},{visible:!1,targets:[7,8,9]}],order:[[0,"desc"]],filterDropDown:{columns:[{idx:9,title:aaSrpSettings.translation.filter.character},{idx:8,title:aaSrpSettings.translation.filter.ship},{idx:7,title:aaSrpSettings.translation.filter.requestStatus}],autoSize:!1,bootstrap:!0,bootstrap_version:5},createdRow:(a,t,e)=>{$(a).attr("data-row-id",e),$(a).attr("data-srp-request-code",t.request_code),r+=parseInt(t.payout_amount),$(".srp-dashboard-user-isk-cost-amount").html(`${r.toLocaleString()} ISK`)}});const l=$("#enable-srp-link"),d=$("#disable-srp-link"),o=$("#delete-srp-link"),n=$("#srp-request-details");l.on("show.bs.modal",a=>{const t=$(a.relatedTarget),e=t.data("url"),s=t.data("name");l.find("#modal-button-confirm-enable-srp-link").attr("href",e),l.find(".modal-body").html(`${aaSrpSettings.translation.modal.enableSrpLink.body}<p class="fw-bold">${s}</p>`)}).on("hide.bs.modal",()=>{l.find(".modal-body").html("")}),d.on("show.bs.modal",a=>{const t=$(a.relatedTarget),e=t.data("url"),s=t.data("name");d.find("#modal-button-confirm-disable-srp-link").attr("href",e),d.find(".modal-body").html(`${aaSrpSettings.translation.modal.disableSrpLink.body}<p class="fw-bold">${s}</p>`)}).on("hide.bs.modal",()=>{d.find(".modal-body").html("")}),o.on("show.bs.modal",a=>{const t=$(a.relatedTarget),e=t.data("url"),s=t.data("name");o.find("#modal-button-confirm-delete-srp-link").attr("href",e),o.find(".modal-body").html(`${aaSrpSettings.translation.modal.deleteSrpLink.body}<p class="fw-bold">${s}</p>`)}).on("hide.bs.modal",()=>{o.find(".modal-body").html("")}),n.on("show.bs.modal",a=>{const t=$(a.relatedTarget),e=t.data("link");$.get({url:e,success:a=>{n.find(".modal-body").html(a)}})}).on("hide.bs.modal",()=>{n.find(".modal-body").text("")})});
//# sourceMappingURL=aa-srp-dashboard.min.js.map